{% load static %}

<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <title>{% block title %}{% if page.seo_title %}{{ page.seo_title }}{% else %}{{ page.title }}{% endif %} | comtura IT-Servicegesellschaft{% endblock %}</title>
    <meta name="description" content="{% if page.search_description %}{{ page.search_description }}{% else %}comtura IT-Servicegesellschaft für Industrie und Handel - Ihr strategischer IT-Dienstleister{% endif %}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="{% static 'media/comtura_favicon.svg' %}">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="{% static 'css/comtura.css' %}" rel="stylesheet">
    
    {% block extra_css %}{% endblock %}
</head>
<body class="bg-light">
    <!-- Navigation -->
    {% include 'navbar.html' %}
    
    <!-- Main Content -->
    <main class="py-4">
        {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    <footer class="bg-light mt-5 py-4 border-top">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h6 class="text-primary fw-bold">Hauptsitz</h6>
                    <p class="mb-1">comtura IT-Servicegesellschaft</p>
                    <p class="mb-1">für Industrie und Handel</p>
                    <p class="mb-1">Möslestr. 36</p>
                    <p class="mb-0">D-79276 Reute</p>
                </div>
                <div class="col-md-4">
                    <h6 class="text-primary fw-bold">Verwaltung und Lager</h6>
                    <p class="mb-1">Am Elzdamm 3</p>
                    <p class="mb-1">79312 Emmendingen</p>
                    <p class="mb-1">Tel: <a href="tel:+4976419372430" class="text-decoration-none">+49 (0)7641-937 24 30</a></p>
                    <p class="mb-0">Fax: +49 (0)7641-937 24 32</p>
                </div>
                <div class="col-md-4">
                    <h6 class="text-primary fw-bold">Geschäftsführer</h6>
                    <p class="mb-1">Ralph Herrmann</p>
                    <p class="mb-0">
                        <a href="mailto:verwaltung@comtura.de" class="text-decoration-none">
                            <i class="fas fa-envelope me-1"></i>verwaltung@comtura.de
                        </a>
                    </p>
                </div>
            </div>
            <hr>
            <div class="row align-items-center">
                <div class="col-md-6">
                    <small class="text-muted">
                        &copy; {% now "Y" %} comtura IT-Servicegesellschaft für Industrie und Handel
                    </small>
                </div>
                <div class="col-md-6 text-end">
                    <a href="/impressum/" class="text-muted text-decoration-none">Impressum</a>
                    <span class="text-muted mx-2">|</span>
                    <a href="/datenschutz/" class="text-muted text-decoration-none">Datenschutz</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Navbar Dropdown Hover-Funktionalität
        document.addEventListener('DOMContentLoaded', function() {
            // Nur auf Desktop (größer als 992px)
            if (window.innerWidth > 991) {
                const dropdowns = document.querySelectorAll('.navbar-nav .dropdown');
                
                dropdowns.forEach(dropdown => {
                    const dropdownToggle = dropdown.querySelector('.dropdown-toggle');
                    const dropdownMenu = dropdown.querySelector('.dropdown-menu');
                    
                    dropdown.addEventListener('mouseenter', () => {
                        dropdownMenu.classList.add('show');
                        dropdownToggle.setAttribute('aria-expanded', 'true');
                    });
                    
                    dropdown.addEventListener('mouseleave', () => {
                        dropdownMenu.classList.remove('show');
                        dropdownToggle.setAttribute('aria-expanded', 'false');
                    });
                    
                    // Klick auf Home-Link soll zur Startseite führen
                    if (dropdownToggle.getAttribute('href') === '/') {
                        dropdownToggle.addEventListener('click', (e) => {
                            if (!e.target.classList.contains('dropdown-toggle')) {
                                return;
                            }
                            
                            if (window.innerWidth > 991) {
                                e.preventDefault();
                                // Bei Desktop: Dropdown öffnen/schließen
                                if (dropdownMenu.classList.contains('show')) {
                                    window.location.href = '/';
                                }
                            }
                            // Bei Mobile: Normal zur Startseite navigieren
                        });
                    }
                });
            }
            
            // Aktive Navigation markieren
            const currentPath = window.location.pathname;
            const navLinks = document.querySelectorAll('.navbar-nav .nav-link, .dropdown-item');
            
            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentPath) {
                    link.classList.add('active');
                    
                    // Wenn es ein Dropdown-Item ist, auch den Parent-Dropdown markieren
                    const parentDropdown = link.closest('.dropdown');
                    if (parentDropdown) {
                        parentDropdown.querySelector('.dropdown-toggle').classList.add('active');
                    }
                }
            });
        });
        </script>

    
    {% block extra_js %}{% endblock %}
</body>
</html>
